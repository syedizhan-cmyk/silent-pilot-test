<!DOCTYPE html>
<html>
<head>
  <title>Stripe Test</title>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <h1>Testing Stripe Connection</h1>
  <button id="testBtn">Test Stripe</button>
  <div id="result"></div>
  
  <script>
    const stripe = Stripe('pk_test_51ShjdCF60t7FOH7IyJwJPuL8F6weMtyoi2s0r2Tlx6FiXFeqyfxw3TZ428YHxN5GEYIAnWaqV64r9u2wnOEUWRrB00MoVWD6fV');
    
    document.getElementById('testBtn').onclick = async () => {
      const result = document.getElementById('result');
      result.innerHTML = 'Testing...';
      
      try {
        // Test creating a checkout session
        const response = await fetch('https://qzvqnhbslecjjwakusva.supabase.co/functions/v1/create-checkout-session', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            planId: 'professional',
            billingCycle: 'monthly',
            priceId: 'price_1SkXj3F60t7FOH7InOilbKBR',
            successUrl: window.location.href,
            cancelUrl: window.location.href
          })
        });
        
        const data = await response.json();
        result.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
        
      } catch (error) {
        result.innerHTML = '<pre style="color: red;">Error: ' + error.message + '</pre>';
      }
    };
  </script>
</body>
</html>
